plusTipSeeTracks README

---------------------------------------------------------------------------

Overview of supported track visualization modes:

5a. Overlay tracks on a frame of the movie, with the option to select 
    individual tracks for more information about them
5b. Make a scatter plot of two parameters (i.e. growth speed and growth 
    lifetime) divided into quadrants depending on values or percentiles. 
    The colors of the four quadrants correspond to tracks overlain on an 
    image in a second figure
5c. Make a movie of EITHER all tracks within a region and within a frame range 
                    OR     one or more individual tracks
5d. Make a movie where comets are color-coded by speed (microns/min)
5e. Create sub-regions-of-interest and automatically extract growth
    trajectories from them

---------------------------------------------------------------------------

Track Type Quick Reference for 5a and 5c - see details below
1 - growth                               (red solid)
2 - forward gap  (pause)                 (cyan dotted)
3 - backward gap (shrinkage)             (yellow dotted)
4 - unclassified gap                     (magenta dotted)
5 - forward gap reclassified as growth   (green solid)
6 - backward gap reclassified as pause   (blue dotted)

---------------------------------------------------------------------------
STEPS:

---------------------------------------------------------------------------
1. Select Project (OPTIONAL) 

Note: once you choose a project, it can be used for multiple tasks 
(e.g. 5a followed by 5b).  You can choose a new one at any time, or click 
"Reset" to start over. If you do not choose the project first, you can 
still run 5a and 5b, but you will have to select the project for each one 
separately.

If "Load projList" is checked, you will be asked to select one or more 
projList.mat files containing the directory paths to various projects you
have previously analyzed.  This is a shortcut, as generating the project 
list can be time-consuming with large directory trees.
The projList.mat file is generated by the function getProj.m,
which is called during project setup from plusTipGetTracks.  (You can also
run getProj from the command line to generate more specific project lists.
See function header for details.)  If "Load projList" is unchecked, you
will select a parent directory containing previously-analyzed projects.

If "Narrow down list" is checked, a window will pop up asking for one or more
search strings.  These are strings of characters that can be used to narrow
down the number of projects you have to scroll through when selecting
from a long list. For example, if "ctrl" appears anywhere in the file path
to your control movies, you may enter "ctrl" into the search string list.
Only those projects matching all the query strings will pop up.  If 
"Narrow down list" is unchecked, this step is bypassed and all the projects 
will appear in the list.

From the resultant list of projects, choose one and use the arrow to move 
it from the left to the right.  

TROUBLESHOOTING:

* If you have created a roi_x directory but have not run tracking and 
post-processing, it will not appear in the list. 

* Unlike plusTipGetTracks, plusTipSeeTracks one can only work with one project 
at a time.

* If no projects are found, check to make sure there are no spaces anywhere 
in the directory path or file names.

* If you get the message "Select any directory above input directory", the 
root of your Matlab current directory does not match the root directory
where your project is stored.  Point to the relevant server location.

---------------------------------------------------------------------------
2. Select Saved ROI (OPTIONAL) 

Click the button if you want to use a saved roiYX.mat or roiMask.tif file.
These are saved during the initial ROI selection from plusTipGetTracks and 
also for each movie that is generated.  Once you load one ROI, it can be 
used for multiple tasks (e.g. 5a followed by 5b).  You can choose a new one
at any time, or click "Reset" to start over with no ROI.  If no ROI is 
chosen, 5a will use the whole image, while 5c and 5d will ask you to 
select a new ROI. 5b currently does not make use of the ROI whether it is
selected or not.

---------------------------------------------------------------------------
3. Choose Frame Range (OPTIONAL)

Default is all frames. For 5a, partial tracks will be shown if they exist
partially outside the frame range. For 5b, partial tracks are exluded from
the scatterplot and overlay if "Remove tracks at start/end" is checked.

---------------------------------------------------------------------------
4. Select Output Directory (OPTIONAL)

Select the directory in which to store movies.  Note that overlays and 
scatterplots, unlike movies, are not automatically saved.

---------------------------------------------------------------------------
5a. Overlay tracks on image with "Track Overlays"

All tracks within the frame range will appear as an overlay on an image
chosen by the user (e.g. first frame of frame range).
 
If "Select Tracks" is checked, the user will be prompted to click one or 
more times on the image. Information about the tracks will appear in the 
Matlab command window as follows:

Track: trackNumber   Frame: frame closest to where user selected
    [trackNumber, start frame, end frame, velocity (microns/min), track type, lifetime (frames), displacement (pixels)]

where velocity is in microns/min and trackType is:
1 - growth                               (red solid)
2 - forward gap  (pause)                 (cyan dotted)
3 - backward gap (shrinkage)             (yellow dotted)
4 - unclassified gap                     (magenta dotted)
5 - forward gap reclassified as growth   (green solid)
6 - backward gap reclassified as pause   (blue dotted)

The track numbers selected will then show up in a new text window below the 
"Plot tracks" button. These are useful if, for example, you want to quickly
make a movie of the track you selected.

The "Plot Tracks" button calls plusTipPlotTracks.m.

---------------------------------------------------------------------------

5b. Map microtubule dynamics onto the cell with "Quadrant Scatter"

Use the Quadrant Scatter option to color-code tracks falling within 
specified ranges of various parameters.  Select parameters to be plotted on
a 2D scatter plot, such as growth speed and growth lifetime.  Adjust the 
data values or percentiles for each parameter independently and select 
"Make Plot."

If "Remove tracks at start/end" is checked, any track not entirely
contained within the frame range will be excluded. Lifetime measurements
can be biased especially in short movies where most long tracks will exist 
at the beginning or end, thereby getting discarded. 
If this option is unchecked, any track which ends before the frame range 
begins or begins after the frame range ends will be excluded.

Six figures will appear: a scatter plot and five images with tracks overlaid.
For the track overlays, the colors of the tracks correspond to the color 
map of the scatter plot. For example, if we take the 50th percentile 
for growth speed and growth lifetime we will see four populations in four 
colors: fast and short-lived, slow and short-lived, fast and long-lived, 
and slow and long-lived.  The four populations will appear separately in 
four images and merged together in a fifth image.

It is also possible to divide the population of tracks based on one 
parameter into three groups.  For example, if we choose growth speed for
both the x- and y- axes, and select the 25th and 50th percentiles, 
respectively, we will see three populations in three colors: tracks in Q1, 
tracks in Q4, and tracks in both Q2 and Q3.  In this case one figure will 
simply show the raw image.

Because the values on the x- and y- axes must be paired, only certain 
combinations of parameters work.  The track type (e.g. "fgap") must be
the same for x- and y- axes.

---------------------------------------------------------------------------

5c. Make a movie using comet detection results and/or track overlays with
"Track Movies"

The "Detected Comet Display Options" radio buttons and the "Display Tracks"
check box control how the detected comets and tracks and are displayed 
on the movie.

    * All comets, current frame only: displays ALL the detected comets from
    a given frame in that frame only.

    * All comets, all frames: displays ALL the detected comets (ie including
    those that did not get incorporated into a track), color-coded by frame.  
    These are displayed throughout the frame range.  This option is useful
    for checking whether a tracking mistake might be due to a missed detection
    or to wrong linking, for example.

    * Comets in tracks only, all frames: displays only the comets used in the
    tracks, color-coded by frame, such that comets in a track appear shortly 
    before and after a track.

    * None: use this option if you want to make a movie of the raw data 
    or if you only want to show the track without the detected comets.

The "Individual Track Numbers" text box can be used to make movies of
individual tracks.  The track numbers correspond to those found in the first
column of projData.nTrack_sF_eF_vMicPerMin_trackType_lifetime_totalDispPix,
the matrix containing the tracking results after post-processing (see the 
plusTipAnalysis_README file for more details). 

You may find it useful to select tracks in 5a and copy and paste the track 
numbers into this text box. Or, load projData manually and look for 
interesting tracks to plot.

Please note that the individual track movies are still bounded by the frame
range given and the frames in which the track exists.

If the "Individual Track Numbers" text box is empty, all tracks will
be shown for the ROI.

The "Dual panel with raw images" function creates a movie where the raw
image is shown on the left and the detection and/or track overlay is shown
on the right.  
 
The "Save as AVI" check box determines whether the movie will be saved as 
.MOV (default) or .AVI.  The AVI option crashes in some versions of Linux, 
so it is advised to leave this box unchecked when working in Linux.
 
The "Make Track Movie" button calls plusTipTrackMovie.m.

---------------------------------------------------------------------------

5d. Make a movie where comets are color-coded by speed using "Speed Movies"

"Speed Limit" is the maximum speed used in the jet color map (e.g. an input 
of 20 will map all speeds faster than 20 to 20 and range from dark blue at 0
to deep red at 20). The default option (max) uses the whole range.  

Circles   - growth
Triangles - fgap
Squares   - bgap  

The "Save as AVI" check box determines whether the movie will be saved as 
.MOV (default) or .AVI.  The AVI option crashes in some versions of Linux, 
so it is advised to leave this box unchecked when working in Linux.

The "Make Speed Movie" button calls plusTipSpeedMovie.m.

---------------------------------------------------------------------------

5e. Select sub-regions of interest

Select a project and saved ROI and press "Select Sub-ROIs" to draw polygons
on an overlay of the ROI.  If no saved ROI is selected, you will be asked
to draw a new one which will be saved.  A "subROIs" folder will be created
under the project directory and to contain info for all sub-regions, which 
are then treated as new projects.

If "Auto selection" is checked, you may enter a number between 0 and 1, which
represents the fraction of distance from the ROI boundary to the centroid.
If a value is entered in the field, you will be asked to draw a line across the
cell instead of drawing individual sub-ROIs.  This line, and a line perpendicular
to it running through the ROI centroid, will be used to divide the cell into five
regions (four quadrants and a central region) if the fraction is less than 1, or
four quadrants (no central region) if the fraction is 1.

Sub-ROI /meta folders will contain data for GROWTH PHASES ONLY pulled from the 
originial ROI's data.  A track is considered to be in the sub-ROI if it spends
three or more frames inside the sub-ROI.

Sub-ROI projects can then be selected for movie making, etc.



