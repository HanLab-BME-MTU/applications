plusTipGetTracks README

This README explains how to do the following:
- Set up new projects
- Select one or more projects to analyze together
- Run detection, tracking, and post-processing

---------------------------------------------------------------------------
1. Set Up New Project(s)

A new project begins with a .tiff series in a folder called "images."  As
analysis commences, project folders named roi_1, roi_2, etc. will be created.  
Multiple projects will only be necessary for a given image series if
there are multiple cells in the field of view (analysis at the sub-cellular
level is possible with post-processing functions).  Even in the multi-cell
case, it is generally fine to analyze them together unless the goal is to
analyze cell-cell heterogeneity.

To initiate a new project, click "Set Up New Project(s)" and select a 
parent directory.  This can be any directory containing one or more 
sub-directories in the hierarchy, called "images," which contain the .tiff 
series of interest.  

If "Draw region of interest" is checked, you will be able to draw up to 9 
regions of interest (ROIs) per movie.  The first frame of each movie will 
appear in succession and allow you to draw a polygon.  Add points by left-
clicking and close the polygon by right-clicking on the first/last point and 
selecting "Create mask."  If "Draw region of interest" is unchecked, you 
will be prompted to click in the center of the cell.  This point helps the 
comet detector estimate the local background.  The whole image will then be 
used as the ROI for future steps. 

The setupRoiDirectories function may be called from the command line
if tiff images should be cropped before analysis.  See function header for
details.

---------------------------------------------------------------------------
2. Select Project(s)

This step allows you to choose one or more projects (i.e. roi_1 folders) 
for analysis.  You may analyze many movies as a batch, provided they 
should use the same control parameter set.

If "Load projList" is checked, you will be asked to select one or more 
projList.mat files containing the directory paths to various projects you
have previously created.  This is a shortcut, as generating the project 
list can be time-consuming with large directory trees.

The projList.mat file is generated by the getProj function,
which is called during project setup from plusTipAnalysis.  You can also
run getProj from the command line to generate more specific project lists.
(See function header for details.)  If "Load projList" is unchecked, you
will select a parent directory containing previously-created projects.

If "Narrow down list" is checked, a window will pop up asking for one or more
search strings.  These are strings of characters that can be used to narrow
down the number of projects you have to scroll through when selecting
from a long list. For example, if "ctrl" appears anywhere in the file path
to your control movies, you may enter "ctrl" into the search string list.
Only those projects matching all the query strings will appear.  If 
"Narrow down list" is unchecked, this step is bypassed and all the projects 
will appear in the list.

From the resultant list of projects, select one or more and use the arrow 
to move them from the left to the right.  The selected projects will be
loaded into the Matlab workspace as a cell array in case you want to 
reference them.

TROUBLESHOOTING:

* If you have not created a roi_x directory for a movie, it will not appear
in the list.  See Step 1. 

* If no projects are found, check to make sure there are no spaces anywhere 
in the directory path or file names.  Also make sure the string "sub" does
not appear anywhere in the path or file names - this is reserved for 
sub-projects.

* If you get the message "Select any directory above input directory", the 
root of your Matlab current directory does not match the root directory
where your project is stored.  Point to the relevant server location.

---------------------------------------------------------------------------
3. Functions to Run

Select which functions you want to run.  The relevant parameter boxes will
become active.  Note that you cannot run Post-Processing without first 
running Tracking, or Tracking without first running Detection.  Enter the 
parameters and click "Start" to commence.

Frame Ranges: frame numbers for which the functions should be performed. 
If running a batch, the same range will be used for all movies, except for
movies where the requested min or max is above the number of images.  For 
such movies, only the images that exist within the frame range will be 
used.  Distinct frame ranges can be given for each function so that it is
possible to test the effects of tracking multiple movies over different 
numbers of frames without having to repeat the time-consuming detection 
step.

After the job finishes, you may want to visualize the results.  To do this,
call plusTipSeeTracks from the Matlab command line.

---------------------------------------------------------------------------
DETECTION PARAMETER SETTINGS

The output of detection will be stored in the /feat directory under the
project directory.

Camera Bit Depth: bit depth of the camera used to record the images.  Value
must be 12, 14, or 16.

If "Save Overlay Plots" is checked, .tiff images of the detection results
will be saved in a sub-directory under /feat.

---------------------------------------------------------------------------
TRACKING PARAMETER SETTINGS

The output of tracking will be stored in the /track directory under the
project directory.  Parameter setting selection may be aided using the 
plusTipParamSweepGUI tool.

Maximum Gap Length (frames): longest duration allowed between growth 
sub-tracks during sub-track linking.  Use 0 to bypass the sub-track 
linking step (this will generate growth sub-tracks only).

Minimum Track Length (frames): shortest possible lifetime for a growth 
sub-track during particle linking. 3 is the default.

Search Radius Range (pixels): Lower and upper bounds for the adaptive 
search radius around a particle's predicted position, given its previous 
motion.  This will depend on the average speed, the frame rate, and how 
much heterogeneity there is between frame-to-frame displacements.

Maximum Angle (degrees): only tracks which begin within the cones bounded
by +/- the forward or backward angle from the end track's final direction
will be considered as candidates for sub-track linking.

Max Shrinkage Factor: multiplier of max growth speed; controls upper bound 
for plus end displacement during shrinkage

Fluctuation Radius (pixels): size of a small disk around a sub-track's final
position, within which candidate tracks are considered to be pausing rather
than growing or shrinking.  This allows small fluctuations outside the 
forward cone to be classified as pause.

---------------------------------------------------------------------------
POST-PROCESSING PARAMETER SETTINGS

The output of post-processing will be stored in the /meta directory under 
the project directory.  Output consists of the projData.mat file and a text 
file called gs_fs_bs_gl_fl_bl_gd_fd_bd.txt will appear in the /meta folder.  
The nine columns contain: 
        1 gs: growth speed
        2 fs: fgap speed
        3 bs: bgap speed
        4 gl: growth lifetime
        5 fl: fgap lifetime
        6 bl: bgap lifetime
        7 gd: growth displacement
        8 fd: fgap displacement
        9 bs: bgap displacement
(NaN means "not a number" - it is a placeholder to make the columns equal
in length).

The projData.mat structure is the most important output of plusTipTracker.  
See the function header of plusTipPostTracking for a description of the 
fields.

If "Make histograms" is checked, a subfolder of /meta will be created
for storing histograms containing the speed, lifetime, and displacement
distributions for the growth, fgap, and bgap populations.  
There is also a stacked histogram, which shows how the three distributions 
compare to one another.  

Frame Rate (s): Camera frame rate

Pixel Size (nm): Real-space pixel size of the image.
